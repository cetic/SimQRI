<?xml version="1.0" encoding="UTF-8"?>
<description:Group xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:description="http://www.eclipse.org/sirius/description/1.1.0" xmlns:description_1="http://www.eclipse.org/sirius/diagram/description/1.1.0" xmlns:description_2="http://www.eclipse.org/sirius/table/description/1.1.0" xmlns:filter="http://www.eclipse.org/sirius/diagram/description/filter/1.1.0" xmlns:style="http://www.eclipse.org/sirius/diagram/description/style/1.1.0" xmlns:tool="http://www.eclipse.org/sirius/diagram/description/tool/1.1.0" xmlns:tool_1="http://www.eclipse.org/sirius/description/tool/1.1.0" xmlns:validation="http://www.eclipse.org/sirius/description/validation/1.1.0" name="simqri" version="11.0.0.201601261200">
  <ownedViewpoints name="SimQRi Design" modelFileExtension="simqri">
    <ownedRepresentations xsi:type="description_1:DiagramDescription" name="SimQRi Diagram" domainClass="metamodel.Model" enablePopupBars="true">
      <metamodel href="http://www.example.org/metamodel#/"/>
      <filters xsi:type="filter:CompositeFilterDescription" name="Hide_Process">
        <filters xsi:type="filter:MappingFilter" mappings="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@nodeMappings[name='SD_batchprocess'] //@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@nodeMappings[name='SD_conveyorbelt']"/>
      </filters>
      <validationSet name="Validate Diagram">
        <ownedRules xsi:type="validation:SemanticValidationRule" name="SD_checkFlowsFromStorages" level="ERROR" message="aql:self.hasOneFlowFromThatStorage().toString()" targetClass="metamodel.Model">
          <audits auditExpression="aql:self.hasOneFlowFromThatStorage().toString().size()=0"/>
        </ownedRules>
        <ownedRules xsi:type="validation:SemanticValidationRule" name="SD_checkOutputsFromBatchProcesses" level="ERROR" message="aql:self.hasAtLeastASuccessOutput().toString()" targetClass="metamodel.Model">
          <audits auditExpression="aql:self.hasAtLeastASuccessOutput().toString().size()=0"/>
        </ownedRules>
        <ownedRules xsi:type="validation:SemanticValidationRule" name="SD_checkOutputFromConveyorBelt" level="WARNING" message="aql:self.hasAnOutputOfSuccessType().toString()" targetClass="metamodel.Model">
          <audits auditExpression="aql:self.hasAnOutputOfSuccessType().toString().size()=0"/>
        </ownedRules>
        <ownedRules xsi:type="validation:SemanticValidationRule" name="SD_checkFlowsFromSuppliers" level="ERROR" message="aql:self.hasOneFlowFromThatSupplier().toString()" targetClass="metamodel.Model">
          <audits auditExpression="aql:self.hasOneFlowFromThatSupplier().toString().size()=0"/>
        </ownedRules>
        <ownedRules xsi:type="validation:SemanticValidationRule" name="SD_checkFlowsFromOutputs" level="ERROR" message="aql:self.hasOneFlowFromThatPort().toString()" targetClass="metamodel.Model">
          <audits auditExpression="aql:self.hasOneFlowFromThatPort().toString().size()=0"/>
        </ownedRules>
        <ownedRules xsi:type="validation:SemanticValidationRule" name="SD_checkFlowsFromElements" level="WARNING" message="aql:self.isLinkedToFlow().toString()" targetClass="metamodel.Model">
          <audits auditExpression="aql:self.isLinkedToFlow().toString().size()=0"/>
        </ownedRules>
      </validationSet>
      <defaultLayer name="Default">
        <nodeMappings name="SD_supplier" deletionDescription="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@toolSections.0/@ownedTools[name='Remove%20Supplier']" labelDirectEdit="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@toolSections.1/@ownedTools[name='SD_DirectEditLabel']" semanticCandidatesExpression="feature:component" semanticElements="aql:self->including(self.supplierDelay)" doubleClickDescription="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@toolSections.1/@ownedTools[name='Open%20EEF%20Wizard']" domainClass="metamodel.Supplier">
          <style xsi:type="style:WorkspaceImageDescription" labelSize="10" sizeComputationExpression="-1" resizeKind="NSEW" workspacePath="/be.cetic.simqri.design/images/supplier.svg">
            <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
          </style>
        </nodeMappings>
        <nodeMappings name="SD_storage" deletionDescription="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@toolSections.0/@ownedTools[name='Remove%20Storage']" labelDirectEdit="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@toolSections.1/@ownedTools[name='SD_DirectEditLabel']" semanticCandidatesExpression="feature:component" doubleClickDescription="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@toolSections.1/@ownedTools[name='Open%20EEF%20Wizard']" domainClass="metamodel.Storage">
          <style xsi:type="style:WorkspaceImageDescription" labelSize="10" sizeComputationExpression="-1" resizeKind="NSEW" workspacePath="/be.cetic.simqri.design/images/storage.svg">
            <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
          </style>
          <conditionnalStyles predicateExpression="aql:self.overflow=true">
            <style xsi:type="style:WorkspaceImageDescription" labelSize="10" sizeComputationExpression="-1" resizeKind="NSEW" workspacePath="/be.cetic.simqri.design/images/overflow-storage.svg">
              <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            </style>
          </conditionnalStyles>
        </nodeMappings>
        <nodeMappings name="SD_batchprocess" deletionDescription="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@toolSections.0/@ownedTools[name='Remove%20Process']" labelDirectEdit="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@toolSections.1/@ownedTools[name='SD_DirectEditLabel']" semanticCandidatesExpression="feature:component" semanticElements="aql:self->including(self.outputs)" doubleClickDescription="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@toolSections.1/@ownedTools[name='Open%20EEF%20Wizard']" domainClass="metamodel.BatchProcess">
          <borderedNodeMappings name="SD_output_bp" deletionDescription="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@toolSections.0/@ownedTools[name='Remove%20Output%20Port']" semanticCandidatesExpression="feature:outputs" domainClass="metamodel.Output">
            <style xsi:type="style:SquareDescription" labelExpression="feature:type" hideLabelByDefault="true" sizeComputationExpression="2" resizeKind="NSEW">
              <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <forbiddenSides>WEST</forbiddenSides>
              <forbiddenSides>SOUTH</forbiddenSides>
              <forbiddenSides>NORTH</forbiddenSides>
              <color xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='green']"/>
            </style>
          </borderedNodeMappings>
          <style xsi:type="style:WorkspaceImageDescription" labelSize="10" sizeComputationExpression="-1" resizeKind="NSEW" workspacePath="/be.cetic.simqri.design/images/batch-process.svg">
            <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
          </style>
          <conditionnalStyles predicateExpression="aql:(self.percentageOfSuccess&lt;100.0 and self.numberOfChains=1)">
            <style xsi:type="style:WorkspaceImageDescription" labelSize="10" sizeComputationExpression="-1" resizeKind="NSEW" workspacePath="/be.cetic.simqri.design/images/single-failing-batch-process.svg">
              <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            </style>
          </conditionnalStyles>
          <conditionnalStyles predicateExpression="aql:self.percentageOfSuccess&lt;100.0">
            <style xsi:type="style:WorkspaceImageDescription" labelSize="10" sizeComputationExpression="-1" resizeKind="NSEW" workspacePath="/be.cetic.simqri.design/images/failing-batch-process.svg">
              <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            </style>
          </conditionnalStyles>
          <conditionnalStyles predicateExpression="aql:self.numberOfChains=1">
            <style xsi:type="style:WorkspaceImageDescription" labelSize="10" sizeComputationExpression="-1" resizeKind="NSEW" workspacePath="/be.cetic.simqri.design/images/single-batch-process.svg">
              <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            </style>
          </conditionnalStyles>
        </nodeMappings>
        <nodeMappings name="SD_conveyorbelt" deletionDescription="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@toolSections.0/@ownedTools[name='Remove%20Process']" labelDirectEdit="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@toolSections.1/@ownedTools[name='SD_DirectEditLabel']" semanticCandidatesExpression="feature:component" doubleClickDescription="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@toolSections.1/@ownedTools[name='Open%20EEF%20Wizard']" domainClass="metamodel.ConveyorBelt">
          <borderedNodeMappings name="SD_output_cb" deletionDescription="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@toolSections.0/@ownedTools[name='Remove%20Output%20Port']" semanticCandidatesExpression="feature:output" domainClass="metamodel.Output">
            <style xsi:type="style:SquareDescription" labelExpression="feature:type" hideLabelByDefault="true" sizeComputationExpression="2" resizeKind="NSEW">
              <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <forbiddenSides>WEST</forbiddenSides>
              <forbiddenSides>SOUTH</forbiddenSides>
              <forbiddenSides>NORTH</forbiddenSides>
              <color xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='green']"/>
            </style>
          </borderedNodeMappings>
          <style xsi:type="style:WorkspaceImageDescription" labelSize="10" sizeComputationExpression="-1" resizeKind="NSEW" workspacePath="/be.cetic.simqri.design/images/conveyer-belt.svg">
            <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
          </style>
        </nodeMappings>
        <toolSections name="Elements">
          <ownedTools xsi:type="tool:NodeCreationDescription" name="SD_Supplier" label="New Supplier" nodeMappings="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@nodeMappings[name='SD_supplier']" iconPath="/be.cetic.simqri.design/gifs/Supplier.gif">
            <variable name="container"/>
            <viewVariable name="containerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool_1:ChangeContext" browseExpression="var:container">
                <subModelOperations xsi:type="tool_1:CreateInstance" typeName="metamodel.Supplier" referenceName="component">
                  <subModelOperations xsi:type="tool_1:SetValue" featureName="name" valueExpression="aql:'new_supplier '+self.eContainer().component->filter(metamodel::Supplier)->size()"/>
                  <subModelOperations xsi:type="tool_1:CreateInstance" typeName="metamodel.Scalar" referenceName="supplierDelay">
                    <subModelOperations xsi:type="tool_1:SetValue" featureName="value" valueExpression="0"/>
                  </subModelOperations>
                </subModelOperations>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:NodeCreationDescription" name="SD_conveyorbelt" label="New Conveyor belt" nodeMappings="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@nodeMappings[name='SD_conveyorbelt']" iconPath="/be.cetic.simqri.design/gifs/ConveyorBelt.gif">
            <variable name="container"/>
            <viewVariable name="containerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool_1:ChangeContext" browseExpression="var:container">
                <subModelOperations xsi:type="tool_1:CreateInstance" typeName="metamodel.ConveyorBelt" referenceName="component">
                  <subModelOperations xsi:type="tool_1:SetValue" featureName="name" valueExpression="aql:'new_conveyor_belt '+self.eContainer().component->filter(metamodel::ConveyorBelt)->size()"/>
                  <subModelOperations xsi:type="tool_1:CreateInstance" typeName="metamodel.Output" referenceName="output">
                    <subModelOperations xsi:type="tool_1:SetValue" featureName="type" valueExpression="OutputType.SUCCESS"/>
                    <subModelOperations xsi:type="tool_1:SetValue" featureName="description" valueExpression="Default Success Port"/>
                  </subModelOperations>
                  <subModelOperations xsi:type="tool_1:CreateInstance" typeName="metamodel.Scalar" referenceName="duration">
                    <subModelOperations xsi:type="tool_1:SetValue" featureName="value" valueExpression="1"/>
                  </subModelOperations>
                </subModelOperations>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:ToolGroup" name="Batch Process">
            <tools xsi:type="tool:NodeCreationDescription" name="SD_batchprocess" label="New Batch process" nodeMappings="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@nodeMappings[name='SD_batchprocess']" iconPath="/be.cetic.simqri.design/gifs/BatchProcess.gif">
              <variable name="container"/>
              <viewVariable name="containerView"/>
              <initialOperation>
                <firstModelOperations xsi:type="tool_1:ChangeContext" browseExpression="var:container">
                  <subModelOperations xsi:type="tool_1:CreateInstance" typeName="metamodel.BatchProcess" referenceName="component">
                    <subModelOperations xsi:type="tool_1:SetValue" featureName="name" valueExpression="aql:'new_batch_process '+self.eContainer().component->filter(metamodel::BatchProcess)->size()"/>
                    <subModelOperations xsi:type="tool_1:CreateInstance" typeName="metamodel.Scalar" referenceName="duration">
                      <subModelOperations xsi:type="tool_1:SetValue" featureName="value" valueExpression="1"/>
                    </subModelOperations>
                    <subModelOperations xsi:type="tool_1:CreateInstance" typeName="metamodel.Output" referenceName="outputs">
                      <subModelOperations xsi:type="tool_1:SetValue" featureName="type" valueExpression="OutputType.SUCCESS"/>
                      <subModelOperations xsi:type="tool_1:SetValue" featureName="description" valueExpression="Default Success Port"/>
                    </subModelOperations>
                  </subModelOperations>
                </firstModelOperations>
              </initialOperation>
            </tools>
            <tools xsi:type="tool:NodeCreationDescription" name="SD_singlebatchprocess" label="New Single batch process" nodeMappings="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@nodeMappings[name='SD_batchprocess']" iconPath="/be.cetic.simqri.design/gifs/sbp.gif">
              <variable name="container"/>
              <viewVariable name="containerView"/>
              <initialOperation>
                <firstModelOperations xsi:type="tool_1:ChangeContext" browseExpression="var:container">
                  <subModelOperations xsi:type="tool_1:CreateInstance" typeName="metamodel.BatchProcess" referenceName="component">
                    <subModelOperations xsi:type="tool_1:SetValue" featureName="name" valueExpression="aql:'new_batch_process '+self.eContainer().component->filter(metamodel::BatchProcess)->size()"/>
                    <subModelOperations xsi:type="tool_1:SetValue" featureName="numberOfChains" valueExpression="1"/>
                    <subModelOperations xsi:type="tool_1:CreateInstance" typeName="metamodel.Scalar" referenceName="duration">
                      <subModelOperations xsi:type="tool_1:SetValue" featureName="value" valueExpression="1"/>
                    </subModelOperations>
                    <subModelOperations xsi:type="tool_1:CreateInstance" typeName="metamodel.Output" referenceName="outputs">
                      <subModelOperations xsi:type="tool_1:SetValue" featureName="type" valueExpression="OutputType.SUCCESS"/>
                      <subModelOperations xsi:type="tool_1:SetValue" featureName="description" valueExpression="Default Success Port"/>
                    </subModelOperations>
                  </subModelOperations>
                </firstModelOperations>
              </initialOperation>
            </tools>
            <tools xsi:type="tool:NodeCreationDescription" name="SD_failingbatchprocess" label="New Failing batch process" nodeMappings="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@nodeMappings[name='SD_batchprocess']" iconPath="/be.cetic.simqri.design/gifs/fbp.gif">
              <variable name="container"/>
              <viewVariable name="containerView"/>
              <initialOperation>
                <firstModelOperations xsi:type="tool_1:ChangeContext" browseExpression="var:container">
                  <subModelOperations xsi:type="tool_1:CreateInstance" typeName="metamodel.BatchProcess" referenceName="component">
                    <subModelOperations xsi:type="tool_1:SetValue" featureName="name" valueExpression="aql:'new_batch_process '+self.eContainer().component->filter(metamodel::BatchProcess)->size()"/>
                    <subModelOperations xsi:type="tool_1:SetValue" featureName="percentageOfSuccess" valueExpression="99.0"/>
                    <subModelOperations xsi:type="tool_1:CreateInstance" typeName="metamodel.Scalar" referenceName="duration">
                      <subModelOperations xsi:type="tool_1:SetValue" featureName="value" valueExpression="1"/>
                    </subModelOperations>
                    <subModelOperations xsi:type="tool_1:CreateInstance" typeName="metamodel.Output" referenceName="outputs">
                      <subModelOperations xsi:type="tool_1:SetValue" featureName="type" valueExpression="OutputType.SUCCESS"/>
                      <subModelOperations xsi:type="tool_1:SetValue" featureName="description" valueExpression="Default Success Port"/>
                    </subModelOperations>
                  </subModelOperations>
                </firstModelOperations>
              </initialOperation>
            </tools>
            <tools xsi:type="tool:NodeCreationDescription" name="SD_singlefailingbatchprocess" label="New Single failing batch process" nodeMappings="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@nodeMappings[name='SD_batchprocess']" iconPath="/be.cetic.simqri.design/gifs/sfbp.gif">
              <variable name="container"/>
              <viewVariable name="containerView"/>
              <initialOperation>
                <firstModelOperations xsi:type="tool_1:ChangeContext" browseExpression="var:container">
                  <subModelOperations xsi:type="tool_1:CreateInstance" typeName="metamodel.BatchProcess" referenceName="component">
                    <subModelOperations xsi:type="tool_1:SetValue" featureName="name" valueExpression="aql:'new_batch_process '+self.eContainer().component->filter(metamodel::BatchProcess)->size()"/>
                    <subModelOperations xsi:type="tool_1:SetValue" featureName="numberOfChains" valueExpression="1"/>
                    <subModelOperations xsi:type="tool_1:SetValue" featureName="percentageOfSuccess" valueExpression="99.0"/>
                    <subModelOperations xsi:type="tool_1:CreateInstance" typeName="metamodel.Scalar" referenceName="duration">
                      <subModelOperations xsi:type="tool_1:SetValue" featureName="value" valueExpression="1"/>
                    </subModelOperations>
                    <subModelOperations xsi:type="tool_1:CreateInstance" typeName="metamodel.Output" referenceName="outputs">
                      <subModelOperations xsi:type="tool_1:SetValue" featureName="type" valueExpression="OutputType.SUCCESS"/>
                      <subModelOperations xsi:type="tool_1:SetValue" featureName="description" valueExpression="Default Success Port"/>
                    </subModelOperations>
                  </subModelOperations>
                </firstModelOperations>
              </initialOperation>
            </tools>
          </ownedTools>
          <ownedTools xsi:type="tool:ToolGroup" name="Storages">
            <tools xsi:type="tool:NodeCreationDescription" name="SD_Storage" label="New Storage" nodeMappings="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@nodeMappings[name='SD_storage']" iconPath="/be.cetic.simqri.design/gifs/Storage.gif">
              <variable name="container"/>
              <viewVariable name="containerView"/>
              <initialOperation>
                <firstModelOperations xsi:type="tool_1:ChangeContext" browseExpression="var:container">
                  <subModelOperations xsi:type="tool_1:CreateInstance" typeName="metamodel.Storage" referenceName="component">
                    <subModelOperations xsi:type="tool_1:SetValue" featureName="name" valueExpression="aql:'new_storage '+self.eContainer().component->filter(metamodel::Storage)->size()"/>
                    <subModelOperations xsi:type="tool_1:SetValue" featureName="overflow" valueExpression="aql:false"/>
                  </subModelOperations>
                </firstModelOperations>
              </initialOperation>
            </tools>
            <tools xsi:type="tool:NodeCreationDescription" name="SD_overflow_storage" label="New Overflow storage" nodeMappings="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@nodeMappings[name='SD_storage']" iconPath="/be.cetic.simqri.design/gifs/overflow-storage.gif">
              <variable name="container"/>
              <viewVariable name="containerView"/>
              <initialOperation>
                <firstModelOperations xsi:type="tool_1:ChangeContext" browseExpression="var:container">
                  <subModelOperations xsi:type="tool_1:CreateInstance" typeName="metamodel.Storage" referenceName="component">
                    <subModelOperations xsi:type="tool_1:SetValue" featureName="name" valueExpression="aql:'new_storage '+self.eContainer().component->filter(metamodel::Storage)->size()"/>
                    <subModelOperations xsi:type="tool_1:SetValue" featureName="overflow" valueExpression="aql:true"/>
                  </subModelOperations>
                </firstModelOperations>
              </initialOperation>
            </tools>
          </ownedTools>
          <ownedTools xsi:type="tool:NodeCreationDescription" documentation="Output ports have to be placed on a batch process object" name="SD_output" label="New Output port" nodeMappings="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@nodeMappings[name='SD_batchprocess']/@borderedNodeMappings[name='SD_output_bp'] //@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@nodeMappings[name='SD_conveyorbelt']/@borderedNodeMappings[name='SD_output_cb']">
            <variable name="container"/>
            <viewVariable name="containerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool_1:ChangeContext" browseExpression="var:container">
                <subModelOperations xsi:type="tool_1:If" conditionExpression="aql:self.oclIsKindOf(metamodel::ConveyorBelt) and self.eContents()->select(i|i.oclIsKindOf(metamodel::Output))->size()=0">
                  <subModelOperations xsi:type="tool_1:CreateInstance" typeName="metamodel.Output" referenceName="output"/>
                </subModelOperations>
                <subModelOperations xsi:type="tool_1:If" conditionExpression="aql:self.oclIsKindOf(metamodel::BatchProcess)">
                  <subModelOperations xsi:type="tool_1:CreateInstance" typeName="metamodel.Output" referenceName="outputs"/>
                </subModelOperations>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:DeleteElementDescription" name="Remove Supplier" forceRefresh="true" elementsToSelect="aql:self.refillPolicy">
            <element name="element"/>
            <elementView name="elementView"/>
            <containerView name="containerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool_1:ChangeContext" browseExpression="var:self">
                <subModelOperations xsi:type="tool_1:For" expression="aql:self.refillPolicy">
                  <subModelOperations xsi:type="tool_1:RemoveElement"/>
                </subModelOperations>
                <subModelOperations xsi:type="tool_1:RemoveElement"/>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:DeleteElementDescription" name="Remove Process" forceRefresh="true" elementsToSelect="aql:self.storageOutputFlow">
            <element name="element"/>
            <elementView name="elementView"/>
            <containerView name="containerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool_1:ChangeContext" browseExpression="var:self">
                <subModelOperations xsi:type="tool_1:For" expression="aql:self.storageOutputFlow">
                  <subModelOperations xsi:type="tool_1:RemoveElement"/>
                </subModelOperations>
                <subModelOperations xsi:type="tool_1:RemoveElement"/>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:DeleteElementDescription" name="Remove Storage" forceRefresh="true">
            <element name="element"/>
            <elementView name="elementView"/>
            <containerView name="containerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool_1:ChangeContext" browseExpression="var:self">
                <subModelOperations xsi:type="tool_1:For" expression="aql:self.storageOutputFlow">
                  <subModelOperations xsi:type="tool_1:RemoveElement"/>
                </subModelOperations>
                <subModelOperations xsi:type="tool_1:For" expression="aql:self.processOutputFlow">
                  <subModelOperations xsi:type="tool_1:RemoveElement"/>
                </subModelOperations>
                <subModelOperations xsi:type="tool_1:For" expression="aql:self.orderOnStockThreshold">
                  <subModelOperations xsi:type="tool_1:RemoveElement"/>
                </subModelOperations>
                <subModelOperations xsi:type="tool_1:RemoveElement"/>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:DeleteElementDescription" name="Remove Output Port" forceRefresh="true">
            <element name="element"/>
            <elementView name="elementView"/>
            <containerView name="containerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool_1:ChangeContext" browseExpression="var:self">
                <subModelOperations xsi:type="tool_1:For" expression="aql:self.processOutputFlow">
                  <subModelOperations xsi:type="tool_1:RemoveElement"/>
                </subModelOperations>
                <subModelOperations xsi:type="tool_1:RemoveElement"/>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
        </toolSections>
        <toolSections name="Usability">
          <ownedTools xsi:type="tool:DoubleClickDescription" name="Open EEF Wizard" mappings="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@nodeMappings[name='SD_batchprocess'] //@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@nodeMappings[name='SD_conveyorbelt'] //@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@additionalLayers[name='SD_edges']/@edgeMappings[name='SD_oost'] //@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@additionalLayers[name='SD_edges']/@edgeMappings[name='SD_processoutputflow'] //@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@nodeMappings[name='SD_storage'] //@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@additionalLayers[name='SD_edges']/@edgeMappings[name='SD_storageoutputflow'] //@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@nodeMappings[name='SD_supplier']">
            <element name="element"/>
            <elementView name="elementView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool_1:ExternalJavaAction" name="Open EEF Wizard Action" id="org.eclipse.sirius.eef.actions.openPropertiesWizard"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:DirectEditLabel" name="SD_DirectEditLabel" inputLabelExpression="aql:self.name">
            <mask mask="{0}"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool_1:SetValue" featureName="name" valueExpression="var:arg0"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:OperationAction" documentation="Will check the syntax &amp; semantic content of your queries" name="Check Queries" precondition="aql:self.oclIsKindOf(metamodel::Model)">
            <view name="views"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool_1:ChangeContext" browseExpression="var:self">
                <subModelOperations xsi:type="tool_1:ExternalJavaAction" name="SD_CheckQueries" id="actionCheckQueries">
                  <parameters name="model" value="aql:self"/>
                </subModelOperations>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:OperationAction" documentation="Will allow you to launch a new simulation" name="New Simulation" precondition="aql:self.oclIsKindOf(metamodel::Model)">
            <view name="views"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool_1:ChangeContext" browseExpression="var:self">
                <subModelOperations xsi:type="tool_1:ExternalJavaAction" name="SD_NewSimulation" id="actionSimulation">
                  <parameters name="model" value="aql:self"/>
                </subModelOperations>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
        </toolSections>
        <customization>
          <vsmElementCustomizations xsi:type="description:VSMElementCustomization" predicateExpression="aql:self.type=metamodel::OutputType::FAILURE">
            <featureCustomizations xsi:type="description:EReferenceCustomization" appliedOn="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@nodeMappings[name='SD_batchprocess']/@borderedNodeMappings[name='SD_output_bp']/@style" referenceName="color">
              <value href="environment:/viewpoint#//@systemColors/@entries[name='red']"/>
            </featureCustomizations>
          </vsmElementCustomizations>
          <vsmElementCustomizations xsi:type="description:VSMElementCustomization" predicateExpression="aql:self.type=metamodel::OutputType::LOWER_QUALITY">
            <featureCustomizations xsi:type="description:EReferenceCustomization" appliedOn="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@nodeMappings[name='SD_batchprocess']/@borderedNodeMappings[name='SD_output_bp']/@style" referenceName="color">
              <value href="environment:/viewpoint#//@systemColors/@entries[name='orange']"/>
            </featureCustomizations>
          </vsmElementCustomizations>
          <vsmElementCustomizations xsi:type="description:VSMElementCustomization" predicateExpression="aql:self.type=metamodel::OutputType::TRASH">
            <featureCustomizations xsi:type="description:EReferenceCustomization" appliedOn="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@nodeMappings[name='SD_batchprocess']/@borderedNodeMappings[name='SD_output_bp']/@style" referenceName="color">
              <value href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            </featureCustomizations>
          </vsmElementCustomizations>
        </customization>
      </defaultLayer>
      <additionalLayers name="SD_edges" activeByDefault="true">
        <edgeMappings name="SD_storageoutputflow" semanticElements="aql:self->including(self.quantity)" doubleClickDescription="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@toolSections.1/@ownedTools[name='Open%20EEF%20Wizard']" sourceMapping="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@nodeMappings[name='SD_storage']" targetMapping="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@nodeMappings[name='SD_batchprocess'] //@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@nodeMappings[name='SD_conveyorbelt']" targetFinderExpression="feature:destination" sourceFinderExpression="feature:source" domainClass="metamodel.StorageOutputFlow" useDomainElement="true" reconnections="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@additionalLayers[name='SD_edges']/@toolSections.1/@ownedTools[name='SD_Reconnect_Target_StorageOutputFlow'] //@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@additionalLayers[name='SD_edges']/@toolSections.1/@ownedTools[name='SD_Reconnect_Source_StorageOutputFlow']">
          <style sizeComputationExpression="2">
            <strokeColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='orange']"/>
            <centerLabelStyleDescription labelSize="10">
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            </centerLabelStyleDescription>
          </style>
          <conditionnalStyles predicateExpression="aql:self.source.storageOutputFlow->select(i|i.destination=self.destination)->size()>1 and self.source.storageOutputFlow->first()&lt;>self">
            <style sizeComputationExpression="2">
              <strokeColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='red']"/>
              <centerLabelStyleDescription>
                <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='red']"/>
              </centerLabelStyleDescription>
            </style>
          </conditionnalStyles>
          <conditionnalStyles predicateExpression="aql:self.source.overflow=true">
            <style sizeComputationExpression="2">
              <strokeColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='purple']"/>
              <centerLabelStyleDescription>
                <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              </centerLabelStyleDescription>
            </style>
          </conditionnalStyles>
        </edgeMappings>
        <edgeMappings name="SD_processoutputflow" semanticElements="aql:self->including(self.quantity and self.processOutputFlowDelay)" doubleClickDescription="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@toolSections.1/@ownedTools[name='Open%20EEF%20Wizard']" sourceMapping="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@nodeMappings[name='SD_batchprocess']/@borderedNodeMappings[name='SD_output_bp'] //@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@nodeMappings[name='SD_conveyorbelt']/@borderedNodeMappings[name='SD_output_cb']" targetMapping="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@nodeMappings[name='SD_storage']" targetFinderExpression="feature:destination" sourceFinderExpression="feature:source" domainClass="metamodel.ProcessOutputFlow" useDomainElement="true" reconnections="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@additionalLayers[name='SD_edges']/@toolSections.1/@ownedTools[name='SD_Reconnect_Target_ProcessOutputFlow'] //@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@additionalLayers[name='SD_edges']/@toolSections.1/@ownedTools[name='SD_Reconnect_Source_ProcessOutputFlow']">
          <style targetArrow="InputClosedArrow" sizeComputationExpression="2">
            <strokeColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='green']"/>
            <centerLabelStyleDescription labelSize="10">
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            </centerLabelStyleDescription>
          </style>
          <conditionnalStyles predicateExpression="aql:self.source.processOutputFlow->select(i|i.destination=self.destination)->size()>1 and self.source.processOutputFlow->first()&lt;>self">
            <style targetArrow="InputClosedArrow" sizeComputationExpression="2">
              <strokeColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='red']"/>
              <centerLabelStyleDescription>
                <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='red']"/>
              </centerLabelStyleDescription>
            </style>
          </conditionnalStyles>
          <conditionnalStyles predicateExpression="aql:self.source.type=metamodel::OutputType::FAILURE">
            <style targetArrow="InputClosedArrow" sizeComputationExpression="2">
              <strokeColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='red']"/>
              <centerLabelStyleDescription>
                <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              </centerLabelStyleDescription>
            </style>
          </conditionnalStyles>
          <conditionnalStyles predicateExpression="aql:self.source.type=metamodel::OutputType::LOWER_QUALITY">
            <style targetArrow="InputClosedArrow" sizeComputationExpression="2">
              <strokeColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='orange']"/>
              <centerLabelStyleDescription>
                <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              </centerLabelStyleDescription>
            </style>
          </conditionnalStyles>
          <conditionnalStyles predicateExpression="aql:self.source.type=metamodel::OutputType::TRASH">
            <style targetArrow="InputClosedArrow" sizeComputationExpression="2">
              <strokeColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <centerLabelStyleDescription>
                <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              </centerLabelStyleDescription>
            </style>
          </conditionnalStyles>
        </edgeMappings>
        <edgeMappings name="SD_oost" doubleClickDescription="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@toolSections.1/@ownedTools[name='Open%20EEF%20Wizard']" sourceMapping="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@nodeMappings[name='SD_supplier']" targetMapping="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@defaultLayer/@nodeMappings[name='SD_storage']" targetFinderExpression="feature:storage" sourceFinderExpression="feature:supplier" domainClass="metamodel.OrderOnStockThreshold" useDomainElement="true" reconnections="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@additionalLayers[name='SD_edges']/@toolSections.1/@ownedTools[name='SD_Reconnect_Target_Oost'] //@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@additionalLayers[name='SD_edges']/@toolSections.1/@ownedTools[name='SD_Reconnect_Source_Oost']">
          <style targetArrow="InputFillClosedArrow" sizeComputationExpression="2">
            <strokeColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='dark_blue']"/>
            <centerLabelStyleDescription labelSize="10" labelExpression="[if (self.period>0) then self.name+' with tick '+' ('+self.orderType+')' else self.name+' ('+self.orderType+')' endif /]">
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='dark_blue']"/>
            </centerLabelStyleDescription>
          </style>
          <conditionnalStyles predicateExpression="aql:self.supplier.refillPolicy->select(i|i.storage=self.storage)->size()>1 and self.supplier.refillPolicy->first()&lt;>self">
            <style sizeComputationExpression="2">
              <strokeColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='red']"/>
              <centerLabelStyleDescription>
                <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='red']"/>
              </centerLabelStyleDescription>
            </style>
          </conditionnalStyles>
        </edgeMappings>
        <toolSections name="Edges">
          <ownedTools xsi:type="tool:EdgeCreationDescription" documentation="Link a storage to a process" name="SD_storageoutputflow" label="Storage -> Process" edgeMappings="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@additionalLayers[name='SD_edges']/@edgeMappings[name='SD_storageoutputflow']">
            <sourceVariable name="source"/>
            <targetVariable name="target"/>
            <sourceViewVariable name="sourceView"/>
            <targetViewVariable name="targetView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool_1:ChangeContext" browseExpression="aql:self.eContainer()">
                <subModelOperations xsi:type="tool_1:CreateInstance" typeName="metamodel.StorageOutputFlow" referenceName="flow">
                  <subModelOperations xsi:type="tool_1:SetValue" featureName="source" valueExpression="var:source"/>
                  <subModelOperations xsi:type="tool_1:SetValue" featureName="destination" valueExpression="var:target"/>
                  <subModelOperations xsi:type="tool_1:CreateInstance" typeName="metamodel.Scalar" referenceName="quantity">
                    <subModelOperations xsi:type="tool_1:SetValue" featureName="value" valueExpression="1"/>
                  </subModelOperations>
                  <subModelOperations xsi:type="tool_1:If" conditionExpression="aql:self.source.storageOutputFlow->select(i|i.destination=self.destination)->size()>1 and self.source.storageOutputFlow->first()&lt;>self">
                    <subModelOperations xsi:type="tool_1:Unset" featureName="source" elementExpression="var:source"/>
                    <subModelOperations xsi:type="tool_1:Unset" featureName="destination" elementExpression="var:target"/>
                    <subModelOperations xsi:type="tool_1:RemoveElement"/>
                  </subModelOperations>
                </subModelOperations>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:EdgeCreationDescription" documentation="Link an output port of a process to a storage" name="SD_processoutputflow" label="Process Output Port -> Storage" edgeMappings="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@additionalLayers[name='SD_edges']/@edgeMappings[name='SD_processoutputflow']">
            <sourceVariable name="source"/>
            <targetVariable name="target"/>
            <sourceViewVariable name="sourceView"/>
            <targetViewVariable name="targetView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool_1:ChangeContext" browseExpression="aql:self.eContainer().eContainer()">
                <subModelOperations xsi:type="tool_1:CreateInstance" typeName="metamodel.ProcessOutputFlow" referenceName="flow">
                  <subModelOperations xsi:type="tool_1:SetValue" featureName="source" valueExpression="var:source"/>
                  <subModelOperations xsi:type="tool_1:SetValue" featureName="destination" valueExpression="var:target"/>
                  <subModelOperations xsi:type="tool_1:CreateInstance" typeName="metamodel.Scalar" referenceName="quantity">
                    <subModelOperations xsi:type="tool_1:SetValue" featureName="value" valueExpression="1"/>
                  </subModelOperations>
                  <subModelOperations xsi:type="tool_1:CreateInstance" typeName="metamodel.Scalar" referenceName="processOutputFlowDelay">
                    <subModelOperations xsi:type="tool_1:SetValue" featureName="value" valueExpression="0"/>
                  </subModelOperations>
                  <subModelOperations xsi:type="tool_1:If" conditionExpression="aql:self.source.processOutputFlow->select(i|i.destination=self.destination)->size()>1 and self.source.processOutputFlow->first()&lt;>self">
                    <subModelOperations xsi:type="tool_1:Unset" featureName="source" elementExpression="var:source"/>
                    <subModelOperations xsi:type="tool_1:Unset" featureName="destination" elementExpression="var:target"/>
                    <subModelOperations xsi:type="tool_1:RemoveElement"/>
                  </subModelOperations>
                </subModelOperations>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:EdgeCreationDescription" documentation="Link a Supplier to a storage" name="SD_oost" label="Supplier -> Storage" edgeMappings="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='SimQRi%20Diagram']/@additionalLayers[name='SD_edges']/@edgeMappings[name='SD_oost']">
            <sourceVariable name="source"/>
            <targetVariable name="target"/>
            <sourceViewVariable name="sourceView"/>
            <targetViewVariable name="targetView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool_1:ChangeContext" browseExpression="aql:self.eContainer()">
                <subModelOperations xsi:type="tool_1:CreateInstance" typeName="metamodel.OrderOnStockThreshold" referenceName="orderOnStockThreshold">
                  <subModelOperations xsi:type="tool_1:SetValue" featureName="supplier" valueExpression="var:source"/>
                  <subModelOperations xsi:type="tool_1:SetValue" featureName="storage" valueExpression="var:target"/>
                  <subModelOperations xsi:type="tool_1:SetValue" featureName="name" valueExpression="aql:'oost '+self.eContainer().orderOnStockThreshold->size()"/>
                  <subModelOperations xsi:type="tool_1:SetValue" featureName="period" valueExpression="0.0"/>
                  <subModelOperations xsi:type="tool_1:If" conditionExpression="aql:self.supplier.refillPolicy->select(i|i.storage=self.storage)->size()>1 and self.supplier.refillPolicy->first()&lt;>self">
                    <subModelOperations xsi:type="tool_1:Unset" featureName="supplier" elementExpression="var:source"/>
                    <subModelOperations xsi:type="tool_1:Unset" featureName="storage" elementExpression="var:target"/>
                    <subModelOperations xsi:type="tool_1:RemoveElement"/>
                  </subModelOperations>
                </subModelOperations>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
        </toolSections>
        <toolSections name="Usability">
          <ownedTools xsi:type="tool:ReconnectEdgeDescription" name="SD_Reconnect_Target_ProcessOutputFlow">
            <source name="source"/>
            <target name="target"/>
            <sourceView name="sourceView"/>
            <targetView name="targetView"/>
            <element name="element"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool_1:ChangeContext" browseExpression="var:element">
                <subModelOperations xsi:type="tool_1:Unset" featureName="destination" elementExpression="feature:destination"/>
                <subModelOperations xsi:type="tool_1:SetValue" featureName="destination" valueExpression="var:target"/>
              </firstModelOperations>
            </initialOperation>
            <edgeView name="edgeView"/>
          </ownedTools>
          <ownedTools xsi:type="tool:ReconnectEdgeDescription" name="SD_Reconnect_Source_ProcessOutputFlow" reconnectionKind="RECONNECT_SOURCE">
            <source name="source"/>
            <target name="target"/>
            <sourceView name="sourceView"/>
            <targetView name="targetView"/>
            <element name="element"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool_1:ChangeContext" browseExpression="var:target">
                <subModelOperations xsi:type="tool_1:SetValue" featureName="processOutputFlow" valueExpression="aql:source.processOutputFlow">
                  <subModelOperations xsi:type="tool_1:ChangeContext" browseExpression="var:source">
                    <subModelOperations xsi:type="tool_1:Unset" featureName="processOutputFlow"/>
                  </subModelOperations>
                </subModelOperations>
              </firstModelOperations>
            </initialOperation>
            <edgeView name="edgeView"/>
          </ownedTools>
          <ownedTools xsi:type="tool:ReconnectEdgeDescription" name="SD_Reconnect_Target_StorageOutputFlow">
            <source name="source"/>
            <target name="target"/>
            <sourceView name="sourceView"/>
            <targetView name="targetView"/>
            <element name="element"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool_1:ChangeContext" browseExpression="var:element">
                <subModelOperations xsi:type="tool_1:Unset" featureName="destination" elementExpression="feature:destination"/>
                <subModelOperations xsi:type="tool_1:SetValue" featureName="destination" valueExpression="var:target"/>
              </firstModelOperations>
            </initialOperation>
            <edgeView name="edgeView"/>
          </ownedTools>
          <ownedTools xsi:type="tool:ReconnectEdgeDescription" name="SD_Reconnect_Source_StorageOutputFlow" reconnectionKind="RECONNECT_SOURCE">
            <source name="source"/>
            <target name="target"/>
            <sourceView name="sourceView"/>
            <targetView name="targetView"/>
            <element name="element"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool_1:ChangeContext" browseExpression="var:target">
                <subModelOperations xsi:type="tool_1:SetValue" featureName="storageOutputFlow" valueExpression="aql:source.storageOutputFlow">
                  <subModelOperations xsi:type="tool_1:ChangeContext" browseExpression="var:source">
                    <subModelOperations xsi:type="tool_1:Unset" featureName="storageOutputFlow"/>
                  </subModelOperations>
                </subModelOperations>
              </firstModelOperations>
            </initialOperation>
            <edgeView name="edgeView"/>
          </ownedTools>
          <ownedTools xsi:type="tool:ReconnectEdgeDescription" name="SD_Reconnect_Target_Oost">
            <source name="source"/>
            <target name="target"/>
            <sourceView name="sourceView"/>
            <targetView name="targetView"/>
            <element name="element"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool_1:ChangeContext" browseExpression="var:element">
                <subModelOperations xsi:type="tool_1:Unset" featureName="storage" elementExpression="feature:storage"/>
                <subModelOperations xsi:type="tool_1:SetValue" featureName="storage" valueExpression="var:target"/>
              </firstModelOperations>
            </initialOperation>
            <edgeView name="edgeView"/>
          </ownedTools>
          <ownedTools xsi:type="tool:ReconnectEdgeDescription" name="SD_Reconnect_Source_Oost" reconnectionKind="RECONNECT_SOURCE">
            <source name="source"/>
            <target name="target"/>
            <sourceView name="sourceView"/>
            <targetView name="targetView"/>
            <element name="element"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool_1:ChangeContext" browseExpression="var:target">
                <subModelOperations xsi:type="tool_1:SetValue" featureName="refillPolicy" valueExpression="aql:source.refillPolicy">
                  <subModelOperations xsi:type="tool_1:ChangeContext" browseExpression="var:source">
                    <subModelOperations xsi:type="tool_1:Unset" featureName="refillPolicy"/>
                  </subModelOperations>
                </subModelOperations>
              </firstModelOperations>
            </initialOperation>
            <edgeView name="edgeView"/>
          </ownedTools>
        </toolSections>
      </additionalLayers>
    </ownedRepresentations>
    <ownedRepresentations xsi:type="description_2:EditionTableDescription" name="Queries Table" initialisation="true" domainClass="metamodel.Model">
      <metamodel href="http://www.example.org/metamodel#/"/>
      <ownedLineMappings name="QT_Query" label="Query" domainClass="metamodel.Query" headerLabelExpression="aql:self.name"/>
      <ownedCreateLine name="Add Non-Typed Query" forceRefresh="true" elementsToSelect="aql:self.query" mapping="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='Queries%20Table']/@ownedLineMappings[name='QT_Query']">
        <variables name="root" documentation="The semantic root element of the table."/>
        <variables name="element" documentation="The semantic currently edited element."/>
        <variables name="container" documentation="The semantic element corresponding to the view container."/>
        <firstModelOperation xsi:type="tool_1:CreateInstance" typeName="metamodel.Query" referenceName="query" variableName="NewQuery">
          <subModelOperations xsi:type="tool_1:SetValue" featureName="system" valueExpression="aql:false"/>
          <subModelOperations xsi:type="tool_1:SetValue" featureName="type" valueExpression="aql:metamodel::QueryType::UNDEFINED"/>
        </firstModelOperation>
      </ownedCreateLine>
      <ownedCreateLine name="Add Quantity Query" forceRefresh="true" elementsToSelect="aql:self.query" mapping="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='Queries%20Table']/@ownedLineMappings[name='QT_Query']">
        <variables name="root" documentation="The semantic root element of the table."/>
        <variables name="element" documentation="The semantic currently edited element."/>
        <variables name="container" documentation="The semantic element corresponding to the view container."/>
        <firstModelOperation xsi:type="tool_1:CreateInstance" typeName="metamodel.Query" referenceName="query" variableName="NewQuery">
          <subModelOperations xsi:type="tool_1:SetValue" featureName="system" valueExpression="aql:false"/>
          <subModelOperations xsi:type="tool_1:SetValue" featureName="type" valueExpression="aql:metamodel::QueryType::QUANTITY"/>
        </firstModelOperation>
      </ownedCreateLine>
      <ownedCreateLine name="Add Quality Query" forceRefresh="true" elementsToSelect="aql:self.query" mapping="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='Queries%20Table']/@ownedLineMappings[name='QT_Query']">
        <variables name="root" documentation="The semantic root element of the table."/>
        <variables name="element" documentation="The semantic currently edited element."/>
        <variables name="container" documentation="The semantic element corresponding to the view container."/>
        <firstModelOperation xsi:type="tool_1:CreateInstance" typeName="metamodel.Query" referenceName="query" variableName="NewQuery">
          <subModelOperations xsi:type="tool_1:SetValue" featureName="system" valueExpression="aql:false"/>
          <subModelOperations xsi:type="tool_1:SetValue" featureName="type" valueExpression="aql:metamodel::QueryType::QUALITY"/>
        </firstModelOperation>
      </ownedCreateLine>
      <ownedCreateLine name="Add Delay Query" forceRefresh="true" elementsToSelect="aql:self.query" mapping="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='Queries%20Table']/@ownedLineMappings[name='QT_Query']">
        <variables name="root" documentation="The semantic root element of the table."/>
        <variables name="element" documentation="The semantic currently edited element."/>
        <variables name="container" documentation="The semantic element corresponding to the view container."/>
        <firstModelOperation xsi:type="tool_1:CreateInstance" typeName="metamodel.Query" referenceName="query" variableName="NewQuery">
          <subModelOperations xsi:type="tool_1:SetValue" featureName="system" valueExpression="aql:false"/>
          <subModelOperations xsi:type="tool_1:SetValue" featureName="type" valueExpression="aql:metamodel::QueryType::DELAY"/>
        </firstModelOperation>
      </ownedCreateLine>
      <ownedCreateLine name="Add System Query (Quantity Type)" precondition="aql:self.query->select(q|q.system=true and q.type=metamodel::QueryType::QUANTITY)->size()&lt;1" forceRefresh="true" elementsToSelect="aql:self.query" mapping="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='Queries%20Table']/@ownedLineMappings[name='QT_Query']">
        <variables name="root" documentation="The semantic root element of the table."/>
        <variables name="element" documentation="The semantic currently edited element."/>
        <variables name="container" documentation="The semantic element corresponding to the view container."/>
        <firstModelOperation xsi:type="tool_1:CreateInstance" typeName="metamodel.Query" referenceName="query" variableName="NewSystemQuery">
          <subModelOperations xsi:type="tool_1:SetValue" featureName="system" valueExpression="aql:true"/>
          <subModelOperations xsi:type="tool_1:SetValue" featureName="type" valueExpression="aql:metamodel::QueryType::QUANTITY"/>
        </firstModelOperation>
      </ownedCreateLine>
      <ownedCreateLine name="Add System Query (Quality Type)" precondition="aql:self.query->select(q|q.system=true and q.type=metamodel::QueryType::QUALITY)->size()&lt;1" forceRefresh="true" elementsToSelect="aql:self.query" mapping="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='Queries%20Table']/@ownedLineMappings[name='QT_Query']">
        <variables name="root" documentation="The semantic root element of the table."/>
        <variables name="element" documentation="The semantic currently edited element."/>
        <variables name="container" documentation="The semantic element corresponding to the view container."/>
        <firstModelOperation xsi:type="tool_1:CreateInstance" typeName="metamodel.Query" referenceName="query" variableName="NewSystemQuery">
          <subModelOperations xsi:type="tool_1:SetValue" featureName="system" valueExpression="aql:true"/>
          <subModelOperations xsi:type="tool_1:SetValue" featureName="type" valueExpression="aql:metamodel::QueryType::QUALITY"/>
        </firstModelOperation>
      </ownedCreateLine>
      <ownedCreateLine name="Add System Query (Delay Type)" precondition="aql:self.query->select(q|q.system=true and q.type=metamodel::QueryType::DELAY)->size()&lt;1" forceRefresh="true" elementsToSelect="aql:self.query" mapping="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='Queries%20Table']/@ownedLineMappings[name='QT_Query']">
        <variables name="root" documentation="The semantic root element of the table."/>
        <variables name="element" documentation="The semantic currently edited element."/>
        <variables name="container" documentation="The semantic element corresponding to the view container."/>
        <firstModelOperation xsi:type="tool_1:CreateInstance" typeName="metamodel.Query" referenceName="query" variableName="NewSystemQuery">
          <subModelOperations xsi:type="tool_1:SetValue" featureName="system" valueExpression="aql:true"/>
          <subModelOperations xsi:type="tool_1:SetValue" featureName="type" valueExpression="aql:metamodel::QueryType::DELAY"/>
        </firstModelOperation>
      </ownedCreateLine>
      <ownedCreateLine name="Add Basic Queries" forceRefresh="true" mapping="//@ownedViewpoints[name='SimQRi%20Design']/@ownedRepresentations[name='Queries%20Table']/@ownedLineMappings[name='QT_Query']">
        <variables name="root" documentation="The semantic root element of the table."/>
        <variables name="element" documentation="The semantic currently edited element."/>
        <variables name="container" documentation="The semantic element corresponding to the view container."/>
        <firstModelOperation xsi:type="tool_1:ChangeContext" browseExpression="var:container">
          <subModelOperations xsi:type="tool_1:ExternalJavaAction" name="QT_DefaultQueries" id="basicQueries">
            <parameters name="model" value="aql:self"/>
          </subModelOperations>
        </firstModelOperation>
      </ownedCreateLine>
      <ownedColumnMappings name="QT_Name" label="Name" headerLabelExpression="Name" canEdit="aql:true" featureName="name" labelExpression="feature:name">
        <foregroundConditionalStyle predicateExpression="aql:self.system=true and self.type=metamodel::QueryType::QUANTITY">
          <style labelSize="10">
            <labelFormat>italic</labelFormat>
            <foreGroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='orange']"/>
          </style>
        </foregroundConditionalStyle>
        <foregroundConditionalStyle predicateExpression="aql:self.system=true and self.type=metamodel::QueryType::QUALITY">
          <style labelSize="10">
            <labelFormat>italic</labelFormat>
            <foreGroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='purple']"/>
          </style>
        </foregroundConditionalStyle>
        <foregroundConditionalStyle predicateExpression="aql:self.system=true and self.type=metamodel::QueryType::DELAY">
          <style labelSize="10">
            <labelFormat>italic</labelFormat>
            <foreGroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='blue']"/>
          </style>
        </foregroundConditionalStyle>
      </ownedColumnMappings>
      <ownedColumnMappings name="QT_Value" label="Value" headerLabelExpression="Value" canEdit="aql:true" featureName="value" labelExpression="feature:value">
        <backgroundConditionalStyle predicateExpression="aql:self.eContainer().thisQueryIsValid().toString().contains(self.name)">
          <style>
            <backgroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='red']"/>
          </style>
        </backgroundConditionalStyle>
      </ownedColumnMappings>
      <ownedColumnMappings name="QT_Result" label="Result" semanticElements="feature:result" headerLabelExpression="&quot;One Shot&quot; results" canEdit="aql:false" featureName="result" labelExpression="feature:result"/>
      <ownedColumnMappings name="QT_Max" label="Max" semanticElements="feature:max" headerLabelExpression="Maximum (MC)" canEdit="aql:false" featureName="max" labelExpression="feature:max"/>
      <ownedColumnMappings name="QT_Min" label="Min" semanticElements="feature:min" headerLabelExpression="Minimum (MC)" canEdit="aql:false" featureName="min" labelExpression="feature:min"/>
      <ownedColumnMappings name="QT_Mean" label="Mean" semanticElements="feature:mean" headerLabelExpression="Mean (MC)" canEdit="aql:false" featureName="mean" labelExpression="feature:mean"/>
      <ownedColumnMappings name="QT_Variance" label="Variance" semanticElements="feature:variance" headerLabelExpression="Variance (MC)" canEdit="aql:false" featureName="variance" labelExpression="feature:variance"/>
      <ownedColumnMappings name="QT_Error" label="Error" semanticElements="feature:error" headerLabelExpression="Error Message" canEdit="aql:false" featureName="error" labelExpression="feature:error">
        <defaultForeground labelSize="10">
          <foreGroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='red']"/>
        </defaultForeground>
      </ownedColumnMappings>
      <ownedColumnMappings name="QT_Type" label="Type" headerLabelExpression="Type" canEdit="aql:false" featureName="type" labelExpression="feature:type">
        <backgroundConditionalStyle predicateExpression="aql:self.type=metamodel::QueryType::QUANTITY and self.system=true">
          <style>
            <backgroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='orange']"/>
          </style>
        </backgroundConditionalStyle>
        <backgroundConditionalStyle predicateExpression="aql:self.type=metamodel::QueryType::QUALITY and self.system=true">
          <style>
            <backgroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='purple']"/>
          </style>
        </backgroundConditionalStyle>
        <backgroundConditionalStyle predicateExpression="aql:self.type=metamodel::QueryType::DELAY and self.system=true">
          <style>
            <backgroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='blue']"/>
          </style>
        </backgroundConditionalStyle>
      </ownedColumnMappings>
    </ownedRepresentations>
    <ownedJavaExtensions qualifiedClassName="be.cetic.simqri.design.templates.CheckOutputs"/>
    <ownedJavaExtensions qualifiedClassName="be.cetic.simqri.design.templates.CheckQuery"/>
    <ownedJavaExtensions qualifiedClassName="be.cetic.simqri.design.templates.CheckFlows"/>
  </ownedViewpoints>
</description:Group>
